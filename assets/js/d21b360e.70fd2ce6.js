"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9188],{66561:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var t=r(85893),o=r(3905);const i={},a="Installation",s={id:"basics/installation",title:"Installation",description:"Running the binary",source:"@site/docs/basics/installation.md",sourceDirName:"basics",slug:"/basics/installation",permalink:"/docs/basics/installation",draft:!1,unlisted:!1,editUrl:"https://github.com/distribworks/dkron/tree/main/website/docs/docs/basics/installation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/docs/basics/configuration"},next:{title:"Intro",permalink:"/docs/intro"}},l={},c=[{value:"Running the binary",id:"running-the-binary",level:2},{value:"Installing the package",id:"installing-the-package",level:2},{value:"Debian repo",id:"debian-repo",level:3},{value:"YUM repo",id:"yum-repo",level:3},{value:"Running in Docker",id:"running-in-docker",level:2},{value:"Launching Dkron as a new container",id:"launching-dkron-as-a-new-container",level:3},{value:"Mounting a mapped file storage volume",id:"mounting-a-mapped-file-storage-volume",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.ah)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.h2,{id:"running-the-binary",children:"Running the binary"}),"\n",(0,t.jsxs)(n.p,{children:["Download the packaged archive for your platform from the ",(0,t.jsx)(n.a,{href:"https://github.com/distribworks/dkron/releases",children:"downloads page"})," and extract the package to a shared location in your drive, like /opt/local/bin."]}),"\n",(0,t.jsxs)(n.p,{children:["Run Dkron with default setting: ",(0,t.jsx)(n.code,{children:"dkron agent --server --bootstrap-expect=1"})]}),"\n",(0,t.jsxs)(n.p,{children:["Navigate to ",(0,t.jsx)(n.a,{href:"http://localhost:8080/ui",children:"http://localhost:8080/ui"})]}),"\n",(0,t.jsx)(n.h2,{id:"installing-the-package",children:"Installing the package"}),"\n",(0,t.jsx)(n.h3,{id:"debian-repo",children:"Debian repo"}),"\n",(0,t.jsx)(n.p,{children:"APT repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"deb [trusted=yes] https://repo.distrib.works/apt/ /\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then install: ",(0,t.jsx)(n.code,{children:"sudo apt-get install dkron"})]}),"\n",(0,t.jsx)(n.h3,{id:"yum-repo",children:"YUM repo"}),"\n",(0,t.jsx)(n.p,{children:"YUM repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[dkron]\nname=Dkron Pro Private Repo\nbaseurl=https://repo.distrib.works/yum/\nenabled=1\ngpgcheck=0\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then install: ",(0,t.jsx)(n.code,{children:"sudo yum install dkron"})]}),"\n",(0,t.jsxs)(n.p,{children:["This will start Dkron as a system service and the place example configuration file under ",(0,t.jsx)(n.code,{children:"/etc/dkron/dkron.yml"})]}),"\n",(0,t.jsx)(n.h2,{id:"running-in-docker",children:"Running in Docker"}),"\n",(0,t.jsx)(n.p,{children:"Dkron provides an official Docker image via Docker Hub that can be used for deployment on any system running Docker."}),"\n",(0,t.jsx)(n.h3,{id:"launching-dkron-as-a-new-container",children:"Launching Dkron as a new container"}),"\n",(0,t.jsx)(n.p,{children:"Here\u2019s a quick one-liner to get you off the ground (please note, we recommend further configuration for production deployments below):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker run -d -p 8080:8080 --name dkron dkron/dkron agent --server --bootstrap-expect=1 --node-name=node1\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will launch a Dkron server on port 8080 by default. You can use ",(0,t.jsx)(n.code,{children:"docker logs -f dkron"})," to follow the rest of the initialization progress. Once the Dkron startup completes you can access the app at localhost:8080"]}),"\n",(0,t.jsx)(n.p,{children:"Since Docker containers have their own ports and we just map them to the system ports as needed it\u2019s easy to move Dkron onto a different system port if you wish. For example running Dkron on port 12345:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker run -d -p 12345:8080 --name dkron dkron/dkron agent --server --bootstrap-expect=1 --node-name=node1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mounting-a-mapped-file-storage-volume",children:"Mounting a mapped file storage volume"}),"\n",(0,t.jsx)(n.p,{children:"Dkron uses the local filesystem for storing the embedded database to store its own application data and the Raft protocol log. The end result is that your Dkron data will be on disk inside your container and lost if you ever remove the container."}),"\n",(0,t.jsx)(n.p,{children:"To persist your data outside of the container and make it available for use between container launches we can mount a local path inside our container."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker run -d -p 8080:8080 -v ~/dkron.data:/dkron.data --name dkron dkron/dkron agent --server --bootstrap-expect=1 --data-dir=/dkron.data\n"})}),"\n",(0,t.jsx)(n.p,{children:"Now when you launch your container we are mounting that folder from our local filesystem into the container."})]})}function p(e={}){const{wrapper:n}={...(0,o.ah)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},3905:(e,n,r)=>{r.d(n,{ah:()=>c});var t=r(67294);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function a(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function s(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=t.createContext({}),c=function(e){var n=t.useContext(l),r=n;return e&&(r="function"==typeof e?e(n):a(a({},n),e)),r},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(e,n){var r=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(r),h=o,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||i;return r?t.createElement(m,a(a({ref:n},p),{},{components:r})):t.createElement(m,a({ref:n},p))}));p.displayName="MDXCreateElement"}}]);