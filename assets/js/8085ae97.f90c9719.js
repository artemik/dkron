"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8144],{31885:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=t(85893),o=t(3905);const i={},a=void 0,s={id:"basics/installation",title:"installation",description:"---",source:"@site/versioned_docs/version-v1/basics/installation.md",sourceDirName:"basics",slug:"/basics/installation",permalink:"/docs/v1/basics/installation",draft:!1,unlisted:!1,editUrl:"https://github.com/distribworks/dkron/tree/main/website/docs/versioned_docs/version-v1/basics/installation.md",tags:[],version:"v1",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/docs/v1/basics/getting-started"},next:{title:"dkron",permalink:"/docs/v1/cli/dkron"}},l={},c=[{value:"title: Installation\nweight: 10",id:"title-installationweight-10",level:2},{value:"Running the binary",id:"running-the-binary",level:2},{value:"Installing the package",id:"installing-the-package",level:2},{value:"Debian repo",id:"debian-repo",level:3},{value:"YUM repo",id:"yum-repo",level:3},{value:"Running in Docker",id:"running-in-docker",level:2},{value:"Launching Dkron on a new container",id:"launching-dkron-on-a-new-container",level:3},{value:"Mounting a mapped file storage volume",id:"mounting-a-mapped-file-storage-volume",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",...(0,o.ah)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"title-installationweight-10",children:"title: Installation\nweight: 10"}),"\n",(0,r.jsx)(n.h2,{id:"running-the-binary",children:"Running the binary"}),"\n",(0,r.jsxs)(n.p,{children:["Download the packaged archive for your platform from the ",(0,r.jsx)(n.a,{href:"https://github.com/distribworks/dkron/releases",children:"downloads page"})," and extract the package to a shared location in your drive, like /opt/local/bin."]}),"\n",(0,r.jsxs)(n.p,{children:["Run Dkron with default setting: ",(0,r.jsx)(n.code,{children:"dkron agent --server"})]}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to ",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"By default dkron will start with a file based, embedded KV store called BoltDB, it is functional for a single node demo but does not offers clustering or HA."})}),"\n",(0,r.jsx)(n.h2,{id:"installing-the-package",children:"Installing the package"}),"\n",(0,r.jsx)(n.h3,{id:"debian-repo",children:"Debian repo"}),"\n",(0,r.jsx)(n.p,{children:"APT repository:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"deb [trusted=yes] https://apt.fury.io/distribworks/ /\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then install: ",(0,r.jsx)(n.code,{children:"sudo apt-get install dkron"})]}),"\n",(0,r.jsx)(n.h3,{id:"yum-repo",children:"YUM repo"}),"\n",(0,r.jsx)(n.p,{children:"YUM repository:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[dkron]\nname=Dkron Pro Private Repo\nbaseurl=https://yum.fury.io/distribworks/\nenabled=1\ngpgcheck=0\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then install: ",(0,r.jsx)(n.code,{children:"sudo yum install dkron"})]}),"\n",(0,r.jsxs)(n.p,{children:["This will start Dkron as a system service and the place example configuration file under ",(0,r.jsx)(n.code,{children:"/etc/dkron/dkron.yml"})]}),"\n",(0,r.jsx)(n.h2,{id:"running-in-docker",children:"Running in Docker"}),"\n",(0,r.jsx)(n.p,{children:"Dkron provides an official Docker image vi Dockerhub that can be used for deployment on any system running Docker."}),"\n",(0,r.jsx)(n.h3,{id:"launching-dkron-on-a-new-container",children:"Launching Dkron on a new container"}),"\n",(0,r.jsx)(n.p,{children:"Here\u2019s a quick one-liner to get you off the ground (please note, we recommend further configuration for production deployments below):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker run -d -p 8080:8080 --name dkron dkron/dkron agent --server\n"})}),"\n",(0,r.jsx)(n.p,{children:"This will launch a Dkron server on port 8080 by default. You can use docker logs -f dkron to follow the rest of the initialization progress. Once the Dkron startup completes you can access the app at localhost:8080"}),"\n",(0,r.jsx)(n.p,{children:"Since Docker containers have their own ports and we just map them to the system ports as needed it\u2019s easy to move Dkron onto a different system port if you wish. For example running Dkron on port 12345:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker run -d -p 12345:8080 --name dkron dkron/dkron\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mounting-a-mapped-file-storage-volume",children:"Mounting a mapped file storage volume"}),"\n",(0,r.jsx)(n.p,{children:"In its default configuration Dkron uses the local filesystem to run a BoltDB embedded database to store its own application data. The end result is that your Dkron application data will be on disk inside your container and lost if you ever remove the container."}),"\n",(0,r.jsx)(n.p,{children:"To persist your data outside of the container and make it available for use between container launches we can mount a local file path inside our container."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker run -d -p 8080:8080 -v ~/dkron.db:/dkron.db --name dkron dkron/dkron agent --server\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now when you launch your container we are mounting that file from our local filesystem into the container."})]})}function h(e={}){const{wrapper:n}={...(0,o.ah)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3905:(e,n,t)=>{t.d(n,{ah:()=>c});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},h=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),p=c(t),u=o,f=p["".concat(l,".").concat(u)]||p[u]||d[u]||i;return t?r.createElement(f,a(a({ref:n},h),{},{components:t})):r.createElement(f,a({ref:n},h))}));h.displayName="MDXCreateElement"}}]);